<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN>
             <html>
             <head>
                <title>Coverage - out/build/linux-debug-llvm/test/test-nngxx-msg - [...]/lib/include/nngxx/msg_body.h</title>
                <link rel="stylesheet" type="text/css" href="llvmcov2html.css"/>
             </head>
             <body>
             <table width="100%" border="0" cellspacing="0" cellpadding="0">
             <tr><td class="title">Coverage Report</td></tr>
             <tr><td class="ruler"><img src="glass.png" width="3" height="3" alt=""/></td></tr>
             <tr>
             <td width="100%">
                <table cellpadding="1" border="0" width="100%">
                   <tr>
                      <td class="headerItem" width="20%">Command:</td>
                      <td class="headerValue" width="80%" colspan=6>out/build/linux-debug-llvm/test/test-nngxx-msg</td>
        </tr>
                     <tr>
                     <td class="headerItem" width="20%">Date:</td>
                     <td class="headerValue" width="15%">Mon Jun  9 15:20:03 2025 </td>
                     <td width="5%"></td>
                     <td class="headerItem" width="20%">Instrumented&nbsp;lines:</td>
                     <td class="headerValue" width="10%">42</td>
                   </tr>
                   <tr>
                   <td class="headerItem" width="20%">Code&nbsp;covered:
                   <td class="headerValue" width="15%">100.0 %</td>
                   <td width="5%"></td>
                     <td class="headerItem" width="20%">Executed&nbsp;lines:</td>
                     <td class="headerValue" width="10%">42</td>
                   </tr>
                 </table>
               </td>
             </tr>
             <tr><td class="ruler"><img src="glass.png" width="3" height="3" alt=""/></td></tr>
           </table>
<pre class="source">
             : /*
             : Copyright (c) 2025 Giuseppe Roberti.
             : All rights reserved.
             : 
             : Redistribution and use in source and binary forms, with or without modification,
             : are permitted provided that the following conditions are met:
             : 
             : 1. Redistributions of source code must retain the above copyright notice, this
             : list of conditions and the following disclaimer.
             : 
             : 2. Redistributions in binary form must reproduce the above copyright notice,
             : this list of conditions and the following disclaimer in the documentation and/or
             : other materials provided with the distribution.
             : 
             : 3. Neither the name of the copyright holder nor the names of its contributors
             : may be used to endorse or promote products derived from this software without
             : specific prior written permission.
             : 
             : THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
             : ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
             : WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
             : DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
             : ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
             : (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
             : LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
             : ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
             : (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
             : SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
             : */
             : #pragma once
             : 
             : #include &quot;nngxx/concept.h&quot;
             : #include &quot;nngxx/err.h&quot;
             : #include &quot;nngxx/msg.h&quot;
             : 
             : namespace nngxx
             : {
             : 
             : struct msg_body
             : {
             :   msg_body(nng_msg* m) noexcept
          53</span> :     : m<span class="lineCov">{m}</span>
             :   {
             :   }
             : 
             :   [[nodiscard]] inline std::size_t size() const noexcept
             :   {
          37</span> : <span class="lineCov">    return nng_msg_len(m);</span>
             :   }
             : 
             :   template&lt;typename char_t&gt;
             :   [[nodiscard]] inline char_t* data() noexcept
             :   {
           2</span> : <span class="lineCov">    return static_cast&lt;char_t*&gt;(nng_msg_body(m));</span>
             :   }
             : 
             :   template&lt;typename char_t&gt;
             :   [[nodiscard]] inline const char_t* data() const noexcept
             :   {
           4</span> : <span class="lineCov">    return static_cast&lt;const char_t*&gt;(nng_msg_body(m));</span>
             :   }
             : 
             :   template&lt;uint_c uint_t&gt;
             :   [[nodiscard]] inline clev::expected&lt;void&gt; append(uint_t x) noexcept
             :   {
           3</span> : <span class="lineCov">    int (*append)(nng_msg*, uint_t);</span>
             : 
             :     if constexpr (std::is_same_v&lt;uint_t, uint16_t&gt;)
             :     {
           1</span> : <span class="lineCov">      append = nng_msg_append_u16;</span>
             :     }
             :     else if constexpr (std::is_same_v&lt;uint_t, uint32_t&gt;)
             :     {
           1</span> : <span class="lineCov">      append = nng_msg_append_u32;</span>
             :     }
             :     else if constexpr (std::is_same_v&lt;uint_t, uint64_t&gt;)
             :     {
           1</span> : <span class="lineCov">      append = nng_msg_append_u64;</span>
             :     }
             : 
           3</span> : <span class="lineCov">    return nngxx::invoke(append, m, x);</span>
             :   }
             : 
             :   [[nodiscard]] inline clev::expected&lt;void&gt; append(const void* val,
             :                                                    std::size_t sz) noexcept
             :   {
           1</span> : <span class="lineCov">    return nngxx::invoke(nng_msg_append, m, val, sz);</span>
             :   }
             : 
             :   template&lt;uint_c uint_t&gt;
             :   [[nodiscard]] inline clev::expected&lt;void&gt; insert(uint_t x) noexcept
             :   {
           3</span> : <span class="lineCov">    int (*insert)(nng_msg*, uint_t);</span>
             : 
             :     if constexpr (std::is_same_v&lt;uint_t, uint16_t&gt;)
             :     {
           1</span> : <span class="lineCov">      insert = nng_msg_insert_u16;</span>
             :     }
             :     else if constexpr (std::is_same_v&lt;uint_t, uint32_t&gt;)
             :     {
           1</span> : <span class="lineCov">      insert = nng_msg_insert_u32;</span>
             :     }
             :     else if constexpr (std::is_same_v&lt;uint_t, uint64_t&gt;)
             :     {
           1</span> : <span class="lineCov">      insert = nng_msg_insert_u64;</span>
             :     }
             : 
           3</span> : <span class="lineCov">    return nngxx::invoke(insert, m, x);</span>
             :   }
             : 
             :   [[nodiscard]] inline clev::expected&lt;void&gt; insert(const void* val,
             :                                                    std::size_t sz) noexcept
             :   {
           1</span> : <span class="lineCov">    return nngxx::invoke(nng_msg_insert, m, val, sz);</span>
             :   }
             : 
             :   template&lt;uint_c uint_t&gt;
             :   [[nodiscard]] inline clev::expected&lt;uint_t&gt; trim() noexcept
             :   {
           3</span> : <span class="lineCov">    uint_t x;</span>
             : 
           3</span> : <span class="lineCov">    int (*trim)(nng_msg*, uint_t*);</span>
             : 
             :     if constexpr (std::is_same_v&lt;uint_t, uint16_t&gt;)
             :     {
           1</span> : <span class="lineCov">      trim = nng_msg_trim_u16;</span>
             :     }
             :     else if constexpr (std::is_same_v&lt;uint_t, uint32_t&gt;)
             :     {
           1</span> : <span class="lineCov">      trim = nng_msg_trim_u32;</span>
             :     }
             :     else if constexpr (std::is_same_v&lt;uint_t, uint64_t&gt;)
             :     {
           1</span> : <span class="lineCov">      trim = nng_msg_trim_u64;</span>
             :     }
             : 
           3</span> : <span class="lineCov">    return nngxx::invoke(trim, m, &amp;x).transform([&amp;]() { return x; });</span>
             :   }
             : 
             :   [[nodiscard]] inline clev::expected&lt;void&gt; trim(std::size_t sz) noexcept
             :   {
           1</span> : <span class="lineCov">    return nngxx::invoke(nng_msg_trim, m, sz);</span>
             :   }
             : 
             :   template&lt;uint_c uint_t&gt;
             :   [[nodiscard]] inline clev::expected&lt;uint_t&gt; chop() noexcept
             :   {
           3</span> : <span class="lineCov">    uint_t x;</span>
             : 
           3</span> : <span class="lineCov">    int (*chop)(nng_msg*, uint_t*);</span>
             : 
             :     if constexpr (std::is_same_v&lt;uint_t, uint16_t&gt;)
             :     {
           1</span> : <span class="lineCov">      chop = nng_msg_chop_u16;</span>
             :     }
             :     else if constexpr (std::is_same_v&lt;uint_t, uint32_t&gt;)
             :     {
           1</span> : <span class="lineCov">      chop = nng_msg_chop_u32;</span>
             :     }
             :     else if constexpr (std::is_same_v&lt;uint_t, uint64_t&gt;)
             :     {
           1</span> : <span class="lineCov">      chop = nng_msg_chop_u64;</span>
             :     }
             : 
           3</span> : <span class="lineCov">    return nngxx::invoke(chop, m, &amp;x).transform([&amp;]() { return x; });</span>
             :   }
             : 
             :   [[nodiscard]] inline clev::expected&lt;void&gt; chop(std::size_t sz) noexcept
             :   {
           1</span> : <span class="lineCov">    return nngxx::invoke(nng_msg_chop, m, sz);</span>
             :   }
             : 
             :   template&lt;uint_c uint_t&gt;
             :   [[nodiscard]] inline clev::expected&lt;uint_t&gt;
             :   read(const std::size_t offset = 0) const noexcept
             :   {
           5</span> : <span class="lineCov">    uint_t v;</span>
             : 
           5</span> : <span class="lineCov">    if (offset + sizeof(decltype(v)) &gt; size())</span>
           5</span> :       <span class="lineCov">return clev::unexpected{nngxx::cpp::err::invalid_memory}</span>;
             : 
           4</span> :     <span class="lineCov">std::memcpy(&amp;v, data&lt;char&gt;() + offset, sizeof(decltype(v)));</span>
             : 
           5</span> : <span class="lineCov">    return v</span>;
             :   }
             : 
             :   template&lt;uint_c uint_t&gt;
             :   [[nodiscard]] inline clev::expected&lt;void&gt;
             :   write(uint_t v, const std::size_t offset = 0) noexcept
             :   {
           3</span> : <span class="lineCov">    if (offset + sizeof(decltype(v)) &gt; size())</span>
           3</span> :       <span class="lineCov">return clev::unexpected{nngxx::cpp::err::invalid_memory}</span>;
             : 
           2</span> :     <span class="lineCov">std::memcpy(data&lt;char&gt;() + offset, static_cast&lt;void*&gt;(&amp;v),</span>
           2</span> : <span class="lineCov">                sizeof(decltype(v)));</span>
             : 
           3</span> : <span class="lineCov">    return {}</span>;
             :   }
             : 
             : private:
             :   nng_msg* m;
             : };
             : 
             : } // namespace nngxx
             : 
             : nngxx::msg_body nngxx::msg_view::body() noexcept
             : {
          30</span> : <span class="lineCov">  return nngxx::msg_body{v};</span>
             : }
             : 
             : const nngxx::msg_body nngxx::msg_view::body() const noexcept
             : {
          23</span> : <span class="lineCov">  return nngxx::msg_body{v};</span>
             : }
             : 
             : static_assert(std::copyable&lt;nngxx::msg_body&gt;);
</pre>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
             <tr><td class="ruler"><img src="glass.png" width="3" height="3" alt=""/></td></tr>
             <tr><td class="versionInfo">Generated by: llvmcov2html</td></tr>
           </table>
           <br/>
           </body>
           </html>
